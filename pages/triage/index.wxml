<!--pages/triage/index.wxml-->
<view class="container">
  <view class="header">
    <text class="title">ğŸ“‹ ç§‘å®¤å»ºè®®</text>
    <text class="subtitle">æè¿°æ‚¨çš„èº«ä½“ä¸é€‚ï¼Œç³»ç»Ÿä¸ºæ‚¨åŒ¹é…å»ºè®®</text>
  </view>

  <view class="input-box">
    <textarea 
      class="symptom-input" 
      placeholder="è¯·è¯¦ç»†æè¿°æ‚¨çš„ç—‡çŠ¶ï¼Œä¾‹å¦‚ï¼šå·¦ä¸‹è…¹åˆºç—›ï¼ŒæŒç»­äº†ä¸¤å¤©ï¼Œæ—©ä¸Šèµ·åºŠå¤´æ™•ï¼Œæœ‰ç‚¹æ¶å¿ƒ;" 
      bindinput="onInput"
      value="{{inputText}}"
      maxlength="200"
    ></textarea>
    <view class="word-count">{{inputText.length}}/200</view>
  </view>

  <button class="analyze-btn" bindtap="onAnalyze" loading="{{loading}}" disabled="{{!canAnalyze || loading}}">
    å¼€å§‹åˆ†æ
  </button>

  <view class="result-card" wx:if="{{result}}">
    <view class="result-header {{result.urgency === 'ç«‹å³æ‹¨æ‰“120' ? 'bg-red' : (result.urgency === 'æ— å…³' ? 'bg-gray' : 'bg-blue')}}">
      <text class="dept-name">{{result.department}}</text>
      <text class="urgency-tag" wx:if="{{result.urgency !== 'æ— å…³'}}">{{result.urgency}}</text>
      <text class="urgency-tag" wx:else>ğŸš«</text>
    </view>
    
    <view class="result-body">
      <block wx:if="{{result.urgency !== 'æ— å…³'}}">
        <view class="result-item">
          <text class="label">ğŸ©º æ¨èç†ç”±ï¼š</text>
          <text class="content">{{result.reason}}</text>
        </view>
        <view class="result-item">
          <text class="label">ğŸ’¡ å°±è¯Šè´´å£«ï¼š</text>
          <text class="content">{{result.tips}}</text>
        </view>
      </block>
      <block wx:else>
        <view class="result-item non-medical-item">
          <text class="content non-medical-reason">{{result.reason}}</text>
          <text class="content non-medical-tip">æˆ‘æ˜¯åŒ»ç–—åŠ©æ‰‹ï¼Œåªèƒ½å›ç­”å¥åº·ç›¸å…³çš„é—®é¢˜å“¦ã€‚</text>
        </view>
      </block>
    </view>
    <view class="disclaimer" wx:if="{{result.urgency !== 'æ— å…³'}}">
      *å»ºè®®ä»…ä¾›å‚è€ƒï¼Œä¸èƒ½æ›¿ä»£åŒ»ç”Ÿè¯Šæ–­ã€‚æ€¥ç—‡è¯·ç›´æ¥å°±åŒ»ã€‚
    </view>
  </view>
</view>

