<!--pages/profile/index.wxml-->
<view class="container">
  <view class="profile-header">
    <button 
      class="avatar-wrapper" 
      open-type="chooseAvatar" 
      bind:chooseavatar="onChooseAvatar"
      disabled="{{isUploading}}"
    >
      <image class="avatar" src="{{avatarUrl}}" mode="aspectFill"></image>
    </button>
    
    <view class="user-info">
      <input 
        type="nickname" 
        class="nickname-input" 
        placeholder="点击输入昵称" 
        value="{{nickName}}" 
        bindchange="onNicknameChange" 
        placeholder-class="placeholder-text"
      />
    </view>
  </view>

  <view class="action-section">
    <button class="save-btn" bindtap="onSaveProfile" disabled="{{!hasChanges || isUploading}}">
      {{isUploading ? '保存中...' : '保存个人资料'}}
    </button>
  </view>

  <view class="menu-section">
    <view class="menu-item" bindtap="onMenuItemClick" data-item="about">
      <text class="menu-icon">ℹ️</text>
      <text class="menu-text">关于我们</text>
      <text class="menu-arrow">></text>
    </view>
  </view>

  <view class="feedback-section">
    <view class="feedback-title">意见与建议</view>
    <view class="feedback-box">
      <textarea 
        class="feedback-input" 
        placeholder="请输入您的建议或遇到的问题（必填）..." 
        placeholder-class="placeholder"
        value="{{feedbackContent}}"
        bindinput="onFeedbackInput"
        maxlength="200"
      ></textarea>
      <view class="word-count">{{feedbackContent.length || 0}}/200</view>
    </view>
    <button 
      class="submit-btn {{isFeedbackEmpty ? 'disabled' : ''}}" 
      bindtap="onSubmitFeedback"
      disabled="{{isFeedbackEmpty}}"
    >
      提交反馈
    </button>
  </view>
</view>

