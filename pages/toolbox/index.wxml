<!--pages/toolbox/index.wxml-->
<view class="container">
  <view class="header">
    <text class="title">实用工具箱</text>
    <text class="subtitle">守护您的健康生活</text>
  </view>

  <view class="tool-grid">
    <view class="tool-item" bindtap="onSOSCall">
      <view class="icon-box bg-red">
        <text class="tool-icon">🆘</text>
      </view>
      <text class="tool-name">一键呼救</text>
    </view>

    <view class="tool-item" bindtap="onOpenMedicalCard">
      <view class="icon-box bg-cyan">
        <text class="tool-icon">💳</text>
      </view>
      <text class="tool-name">医保凭证</text>
    </view>

    <view class="tool-item" bindtap="onCalculateBMI">
      <view class="icon-box bg-blue">
        <text class="tool-icon">⚖️</text>
      </view>
      <text class="tool-name">BMI计算器</text>
    </view>

    <view class="tool-item" bindtap="onShowFirstAid">
      <view class="icon-box bg-purple">
        <text class="tool-icon">⛑️</text>
      </view>
      <text class="tool-name">急救常识</text>
    </view>

    <view class="tool-item" bindtap="onOpenTriage" wx:if="{{showMedicalGuide}}">
      <view class="icon-box bg-indigo">
        <text class="tool-icon">📋</text>
      </view>
      <text class="tool-name">科室建议</text>
    </view>
  </view>
</view>

<!-- 医保凭证提示模态框 -->
<view wx:if="{{showMedicalCardModal}}" class="medical-card-modal">
  <view class="medical-card-modal-content">
    <view class="medical-card-modal-header">
      <text class="medical-card-modal-title">提示</text>
      <text class="medical-card-modal-close" bindtap="onCloseMedicalCardModal">×</text>
    </view>
    <view class="medical-card-modal-body">
      <view class="medical-card-modal-tip">
        <text>即将打开</text>
        <text class="highlight-text">腾讯健康</text>
        <text>小程序，点击左上角</text>
        <text class="highlight-text">医保码</text>
      </view>
    </view>
    <view class="medical-card-modal-footer">
      <button class="medical-card-modal-btn cancel-btn" bindtap="onCloseMedicalCardModal">取消</button>
      <button class="medical-card-modal-btn confirm-btn" bindtap="onConfirmOpenMedicalCard">确定</button>
    </view>
  </view>
</view>

<!-- BMI计算器输入模态框 -->
<view wx:if="{{showBMIModal}}" class="bmi-modal show">
  <view class="bmi-modal-content">
    <view class="bmi-modal-header">
      <text class="bmi-modal-title">BMI计算器</text>
      <text class="bmi-modal-close" bindtap="onCloseBMIModal">×</text>
    </view>
    <view class="bmi-modal-body">
      <view class="bmi-input-item">
        <text class="bmi-input-label">身高（厘米）</text>
        <input 
          class="bmi-input" 
          type="digit" 
          placeholder="请输入身高，例如：165" 
          value="{{bmiHeight}}"
          bindinput="onBMIHeightInput"
          placeholder-class="bmi-input-placeholder"
          maxlength="3"
        />
      </view>
      <view class="bmi-input-item">
        <text class="bmi-input-label">体重（公斤）</text>
        <input 
          class="bmi-input" 
          type="digit" 
          placeholder="请输入体重，例如：65" 
          value="{{bmiWeight}}"
          bindinput="onBMIWeightInput"
          placeholder-class="bmi-input-placeholder"
          maxlength="3"
        />
      </view>
    </view>
    <view class="bmi-modal-footer">
      <button class="bmi-modal-btn cancel-btn" bindtap="onCloseBMIModal">取消</button>
      <button class="bmi-modal-btn confirm-btn" bindtap="onBMIConfirm">计算</button>
    </view>
  </view>
</view>

